<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale =1.0">
    <link rel="stylesheet" href="survey.css">
    <title>AI Music Survey</title>

  </head>

   
<body>  
  
<div id="wrapper">
<div class="slide">
  <div class="textbox">
    <h1>Welcome to the Survey!</h1>
    <p>Thank you so much for agreeing to take this survey. I am conducting research regarding AI generated music. 
      Are you able to tell the difference?

      <br><br>

      Click “Next” for details.
      
    </p>
    </div>
    </div>
    <!--Send form to my survey email for review-->
  <form action = "https://formsubmit.co/4705812dfb9aa5cb528c2c983052092f" method="POST">
  
<!-- Slide 1-->
 <div class="slide">
  <div class ="textbox">
    <h1>Instructions</h1>
      <p>This survey involves listening to music and determining what was written by AI, and what was written by a real person. 
        Headphones are recommended but not required. 
        The survey should take no more than 20 minutes. 
        <br><br>
         All required questions are marked with an <b>asterisk (*)</b>.
         You must answer all required questions on each slide to continue to the next one. Questions with no asterisk are optional.

         <br><br>

         There are <b>8</b> short excerpts to listen to. Two excerpts will be presented at a time. 
         After listening to each excerpt, there will be a few short questions to answer. 
         
        
        <br><br>
        
        When you are ready to begin the survey, press “Next.”
        </p>
        </div>
  </div>


<!-- Question 2-->
 <div class="slide">
  <div class="textbox">
        <label for="q1a">1. Please listen to these two audio clips.</label><br>
        <p>The theme was: "The emptiness of a dream unfulfilled."</p>
        <figure>
        <audio controls title="Audio Excerpt 1">
            <source src="Files/testaudiofile.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
        <figcaption>Audio Excerpt 1</figcaption>
        </figure>
        <br>

        <figure>

        <audio controls>
          <source src="Files/testaudiofile.mp3" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>
        <figcaption>Audio Excerpt 2</figcaption>
      </figure>
      <br>

      <p>Which excerpt do you think was written by AI?</p>
        <select id="q1a" name="question1a" required>
            <option value=""></option>
            <option value="E1">Excerpt 1</option>
            <option value="E2">Excerpt 2</option>            
        </select>

        <p>Which excerpt did you feel best expressed the theme?</p>
        <select id="q1b" name="question1b" required>
            <option value=""></option>
            <option value="Excerpt 1">Excerpt 1</option>
            <option value="Excerpt 2">Excerpt 2</option>            
        </select>

        </div>
 </div>

       

        <br><br>
        <!-- Submit questions-->  
         
        <div class="slide">
          <div class="textbox">
        <h1>You’ve reached the end of the survey!</h1>
        <p>Use the “Back” button if you would like to review your answers. 
          When you are ready, press “Submit.”</p>

        <br>
        </div>

        <!--Submit BUtton-->
          <input type="submit" value="Submit!"/>
          <input type="hidden" name="_next" value="thanks.html">
        </div>
        <br>


  </form>   

  <!--Backwards and Forwards buttons-->
  <button id="backBtn" onclick="advanceSlide(-1)"> &#10096 Back </button>
  <button id="nextBtn" onclick="advanceSlide(1)"> &#10097 Next </button>

  </div>

  <!--JavaScript for button controls-->
<script>
   var currentSlide = 1;
   displaySlide(currentSlide);


   //Switch to the next slide
   function advanceSlide(n)
   {
    
    //Initializations
    var x = document.getElementsByClassName("slide")[currentSlide - 1];
    var inputs = x.querySelectorAll("input[required]");
    var selects = x.querySelectorAll("select[required]");
    var audios = x.querySelectorAll("audio");

     //Prevent user from movint to next slide if audio files have not been played.
    for (var i = 0; i < audios.length; i++)
   {
       if(!audios[i].ended)
        {
  
           alert("Please listen to the audio files before continuing.");
           return;  
   
        }
    }

   //Prevent user from movint to next slide if fields are not filled 
   for (var i = 0; i < inputs.length; i++)
   {
      if (!inputs[i].checkValidity())
      {
        inputs[i].reportValidity();
        return;
      }
   }

     //Prevent user from movint to next slide if no choice made from dropdown
   for (var i = 0; i < selects.length; i++)
   {
      if (!selects[i].checkValidity())
      {
        selects[i].reportValidity();
        return;
      }
   }

 

  displaySlide(currentSlide += n);
}

   //Show the current slide (accept current slide counter)
   function displaySlide(n)
   {

   //Initializations
    var i;
    var x = document.getElementsByClassName("slide");
    var forward = document.getElementById("nextBtn");
    var back = document.getElementById("backBtn");

    var totalSlides = x.length;

    //Prevents slide counter from being more than total number of slides
    //or less than zero
    if (n > totalSlides)
    {
      currentSlide = 1;
    }

    if (n < 1) 
    {
      currentSlide = totalSlides;
    }

    for (i = 0; i < totalSlides; i++)
    {
      x[i].style.display = "none";
    }

    x[currentSlide-1].style.display = "block";

    //Hides forward button on last slide
    if (currentSlide == totalSlides)
    {
      forward.style.display = "none";
    }
    else
    {
      forward.style.display = "inline";
    }

      //Hides back button on first slide
    if (currentSlide == 1)
    {
      back.style.display = "none";
    }
    else
    {
      back.style.display = "inline";
    }

   }

   </script>

  </body>

</html>
